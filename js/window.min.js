(function(){var a=false;var c=false;$(document).ready(function(){e();$(".window").on("mousedown",function(g){g.stopPropagation();f($(this))});$(".menu-btn").on("click",function(h){h.stopPropagation();var g=$(this);if(h.which==1){if(c){b()}else{d(g,h)}}});$(".menu-btn").on("mouseenter",function(h){h.stopPropagation();var g=$(this);if(c){b();d(g,h)}});$("body").on("mousedown",function(g){$(".window").removeClass("focused");if(c){b()}});$(".menu-btn, .menu").on("mousedown",function(g){g.stopPropagation();f($(this).closest(".window"))});$(".menu-item").on("mouseenter",function(g){$(this).addClass("selected")});$(".menu-item").on("mouseleave",function(g){$(this).removeClass("selected")});$(".menu-item:not(.disabled)").on("click",function(g){g.stopPropagation();b()})});function d(h){if(!c){h.addClass("active");c=true;var g=h.closest(".menu-bar").find(".menu#mnu_"+h.attr("id"));g.css("top",(h.height()+4)+"px");g.css("left",h.position().left+"px");g.css("display","inline-block")}}function b(){if(c){c=false;$(".menu-btn").removeClass("active");$(".menu").css("display","none")}}function f(g){if(!g.hasClass("focused")){$(".window").removeClass("focused");g.addClass("focused")}}function e(){var g=$(".title-bar *:not(.btn-container, .btn-container *, .icon)");g.on("mousedown",function(l){if(l.which==1){a=true;var k=g.closest(".window");var j=k.offset();var i=l.pageX-j.left;var h=l.pageY-j.top;$("body").on("mousemove",function(m){k.css("top",(m.pageY-h)+"px");k.css("left",(m.pageX-i)+"px")})}});$("body").on("mouseup",function(h){if(a){h.stopPropagation();if(h.which==1){$("body").off("mousemove");a=false}}})}})();