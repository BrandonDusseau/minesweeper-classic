(function(){var a=false;var c=false;var d=false;var g=false;$(document).ready(function(){f();$(".menu-item").on("mouseenter",function(i){$(this).addClass("selected")});$(".menu-item").on("mouseleave",function(i){$(this).removeClass("selected")});$(".menu, .menu *").on("mousedown",function(i){d=true});$(".menu-item:not(.disabled)").on("click",function(i){b()});$(".menu-btn").on("mousedown",function(k){var j=$(this);if(k.which==1){var i=true;if(c){if($(this).hasClass("active")){i=false}b()}if(i){e(j,k)}}});$(".menu-btn").on("mouseenter",function(j){if(c&&!$(this).hasClass("active")){var i=$(this);b();e(i,j)}});$(":not(.menu-btn, .menu-btn *, .menu, .menu *)").on("mousedown",function(i){if(c&&!d){b()}if($(this).is("html")){d=false}});$(".window").on("mousedown",function(i){g=true;h($(this))});$("body").on("mousedown",function(i){if(!g){$(".window").removeClass("focused")}if($(this).is("html")){g=false}})});function e(j){if(!c){j.addClass("active");c=true;d=true;var i=j.closest(".menu-bar").find(".menu#mnu_"+j.attr("id"));i.css("top",(j.height()+4)+"px");i.css("left",j.position().left+"px");i.css("display","inline-block")}}function b(){if(c){c=false;$(".menu-btn").removeClass("active");$(".menu").css("display","none")}d=false}function h(i){if(!i.hasClass("focused")){$(".window").removeClass("focused");i.addClass("focused")}}function f(){var i=$(".title-bar *:not(.btn-container, .btn-container *, .icon)");i.on("mousedown",function(n){if(n.which==1){a=true;var m=i.closest(".window");var l=m.offset();var k=n.pageX-l.left;var j=n.pageY-l.top;$("body").on("mousemove",function(o){m.css("top",(o.pageY-j)+"px");m.css("left",(o.pageX-k)+"px")})}});$("body").on("mouseup",function(j){if(a){if(j.which==1){$("body").off("mousemove");a=false}}})}})();